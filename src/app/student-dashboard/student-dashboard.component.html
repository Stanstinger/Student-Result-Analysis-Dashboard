<div class="dashboard-wrapper">
  <aside id="sidebar" #sidebar>
    <div class="d-flex">
      <button id="toggle-btn" type="button" (click)="toggleSidebar()">
        <i class="bx bx-grid-alt"></i>
      </button>
      <div class="sidebar-logo">
        <a href="#">EduLearn</a>
      </div>
    </div>
    <ul class="sidebar-nav">
      <li class="sidebar-item">
        <a href="/student-dashboard;student" class="sidebar-link">
          <i class="bx bx-home-alt"> </i>
          <span>Dashboard</span>
        </a>
      </li>
    </ul>
    <div class="sidebar-footer">
      <a href="#" class="sidebar-link">
        <i class="bx bx-log-out"></i>
        <span>Log Out</span>
      </a>
    </div>
  </aside>
  <div class="main">
    <nav class="navbar navbar-expand px-3">
      <div>
        <button
          class="menu-btn"
          id="toggle-btn"
          type="button"
          (click)="toggleSidebar()"
        >
          <i class="bx bx-grid-alt"></i>
        </button>
      </div>

      <div>
        <i class="bx bx-user"></i>
        <span>{{ student.studentName }}</span>
      </div>
      <a href="#" class="nav-link">
        <i class="bx bx-log-out"></i>
      </a>
    </nav>
    <main class="content">
      <div class="container-fluid">
        <div class="nb-3">
          <h3 class="fw-bold fs-4 mb-3">
            Welcome to your dasboard, {{ student.studentName }}
          </h3>
          <div class="row row-cols-1 row-cols-md-2">
            <div class="col">
              <div class="row">
                <div class="col-12 col-md-6">
                  <div class="card border-0">
                    <div class="card-body py-4">
                      <h5 class="mb-2 fw-bold">Student Details</h5>
                      <p class="mb-2 fw-bold">
                        Class: {{ student.studentClass }}
                      </p>
                      <div class="mb-0">
                        <p class="mb-2 fw-bold">
                          Subjects: {{ student.grades.length }}
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-12 col-md-6">
                  <div class="card border-0">
                    <div class="card-body py-4">
                      <h5 class="mb-2 fw-bold">MEAN GRADE</h5>
                      <p class="mb-2 fw-bold">
                        Total Average : {{ calculateTotalAverage().total }}
                      </p>
                      <div class="mb-0 d-flex gap-2 align-items-center">
                        <span class="fw-bold">Average Grade: </span>
                        <h4>
                          {{
                            calculateTotalGrade(calculateTotalAverage().average)
                          }}
                        </h4>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-12">
                  <app-grades-table
                    [grades]="student.grades"
                  ></app-grades-table>
                </div>
              </div>
              <div class="row">
                <div class="col-12 mt-3">
                  <app-carousel [grades]="student.grades"></app-carousel>
                </div>
              </div>
            </div>
            <div class="col">
              <div class="row">
                <div class="col-12">
                  <div>
                    <app-doughnut-chart
                      [grades]="student.grades"
                    ></app-doughnut-chart>
                  </div>
                </div>
                <div class="col-12 p-4">
                  <h3 class="fw-bold fs-4 my-3">Performance Review</h3>
                  <div>
                    <app-dynamic-chart
                      [grades]="student.grades"
                    ></app-dynamic-chart>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>
